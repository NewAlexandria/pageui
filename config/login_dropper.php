<?phpsession_start();$uri_append = '';if ( $_REQUEST['jsoncallback'] ) {	$uri_append = "&jsoncallback=".$_REQUEST['jsoncallback'];}// begin buffering output of the page.  later we'll handle where to output.ob_start();if (! $_REQUEST['jsoncallback'] ) {?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><?php } ?><head>	<title>PageUI Login</title>	<meta name="generator" content="BBEdit 9.0" /></head><body style="padding: 15px;"><?php if ($_REQUEST['err'] != '') {	echo '<div style="float: right; border: 1px red solid; padding: 5px;">';	if ($_REQUEST['err'] == 'logout') { ?>		You have been successfully logged out.<BR /><BR />			<?php } else if ($_REQUEST['err'] == '1') { ?>		There was a problem with your login information.  Please try to login again.		<BR><BR>		If the problem persists, please contact the administrator.</font>	<?php } else if ($_REQUEST['err'] == '2') { ?>		There was a problem displaying the page.  Please try to login again.		<BR><BR>		If the problem persists, please contact the administrator.</font><?php }	echo '</div>';} else { ?><div style="width: 200px; margin: 15px; float: right; border: 1px #9Ab7a7 solid; padding: 10px; font-family: lucida, sans-serif; font-size: 9pt; color: #000;">	You will have to login again after three hours of inactivity, unless you check the box.  If you are using PageUI from a public computer, you may not want to maintain your login in order to protect your data.</div><?php } ?><div style="padding: 10px 0 0 10px; font-family: lucida, sans-serif; font-size: 12pt; color: #000">PageUI Login</div><div style="display: inline-block; width: 300px; text-align: right; color: #f00; font-size: 12px;"><?php echo $_REQUEST['err'] ?></div><div style="margin: 10px; padding: 7px; width: 400px; font-family: lucida, sans-serif; font-size: 9pt; color: #000;">	<form action="javascript:doLogin();" method="post" name="dropper_login" id="dropper_login">	<table cellspacing="0" cellpadding="0">		<tr>			<td><span class="">Username:</span></td>			<td style="padding-right: 5px;"><input type="text" name="username" size="15" maxlength="20" tabindex="100001" accesskey="p" id="username"></td>						<td style="padding-left: 20px; border-left: 3px #9Ab7a7 double;"><input id="make_maintain" type="checkbox" value="1" name="make_maintain" tabindex="100002" /><span style="font-size: 10pt;">: Keep me logged in</span></td>		</tr><tr>			<td><span class="">Password:</span></td>			<td><input type="password" name="password" size="15" maxlength="30" tabindex="100002" accesskey="p" id="password"></td>						<td style="padding-left: 25px;"><input type="submit" name="submit" value="Login" tabindex="100004"></td>		</tr>	</table>	<input name="x" type="hidden" value="login" />	<input name="return" type="hidden" value="http://www.pageui.com/config/login_dropper.php" />	<input name="page" type="hidden" value="http://www.pageui.com/link_dropper.php" />	</form></div><script type="text/javascript">// <![CDATA[function doLogin() {	loadFrame ( "http://www.pageui.com/config/login.php?"+$("#dropper_login *").serialize() );	//	$.post("http://www.pageui.com/test/config/login.php?"+$("#dropper_login *").serialize(),//		function(){//		$("#dropper_frame").load("http://www.pageui.com/test/link_dropper.php" );		//	});}$('#username').focus();// ]]></script></body><?php if (! $_REQUEST['jsoncallback'] ) {?></html><?php }// no w that we have the full page, flush it to text or build the JSON and respond with it.if ( $_REQUEST['jsoncallback'] ) {	$arr = array( 'bigpage'=> ob_get_contents() );	$json_page = json_encode ( $arr );	// now that it's stored, dump everything generated	ob_clean();		header('Cache-Control: no-cache, must-revalidate');	header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');	header('Content-type: application/x-javascript');	// print the constructed JSON varbiable to the output buffer	echo $_REQUEST['jsoncallback']."(".$json_page.")";		// push it all to the client	ob_end_flush();	} else {	// or, just push it all to the client	ob_end_flush();	}?>