<?phpsession_start (  );/// Ideally, each of the functions called here would instead pass data to SQL stored procedures.  These would execute more quickly, prevent poisoned input, and scale easier.  The SQL should return multiple variables for errtxt and success_status, and may need to bundle these as JSON / etc to accomplish it via the MySQL driver.  They were coded here in PHP for rapid prototyping$errtxt = '';require_once('groups_lib.php');require_once('db.php');include_once('keys.php');$errtxt .= '<br />proc: '.$_REQUEST['proc'];$user_id = ReturnSecureString( $_SESSION['user_id'] );$page_id = ReturnSecureString( $_SESSION['page_id'] );$group_id = ReturnSecureString( $_REQUEST['group_id'] );$new_group = ReturnSecureString( $_REQUEST['new_group'] );$grow = ReturnSecureString( $_REQUEST['grow'] );$group = ReturnSecureString( $_REQUEST['group'] );$title = ReturnSecureString( $_REQUEST['title'] );switch ( $_REQUEST['proc'] ){    case "add":    	    	AddGroup ($new_group, $page_id, $user_id);    					Leave("Group '<i>".$new_group."</i>' successfully created.");        break;    case "update":    	    	EditGroupName ($user_id, $page_id, $group_id, $title);  				Leave("Group was renamed to '<i>".$title."</i>'" );        break;    case "delete":    	    	DeleteGroup ($user_id, $page_id, $group_id);  				Leave("The group and its links were removed." );        break;    case "updateSort":		$errtxt .= $_SERVER['REQUEST_URI'];				updateGroupSort ( $user_id, $page_id, $grow, $group );		        Leave("Group order shifted");        break;    default:    	$errtxt .= '<br/>no input';        Leave("~ Input Required ~");        break;}?>